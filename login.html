<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Firebase Phone Auth</title>
  <style>
    body {
      font-family: 'Kanit', sans-serif;
      background-color: #111;
      color: white;
      padding: 40px;
    }
    input, button {
      padding: 10px;
      margin: 10px 0;
      width: 300px;
      font-size: 16px;
      border-radius: 5px;
      border: none;
    }
    button {
      cursor: pointer;
      background-color: white;
      color: black;
    }
    button:hover {
      background-color: gray;
      color: white;
    }
    #verification-code, #verify-code-button {
      display: none;
    }
  </style>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-auth.js"></script>
</head>
<body>

  <h2>Phone Number Authentication</h2>

  <input type="tel" id="phone-number" placeholder="+63XXXXXXXXXX" required><br>
  <div id="recaptcha-container"></div>
  <button id="send-code">Send Verification Code</button>

  <input type="text" id="verification-code" placeholder="Enter OTP Code">
  <button id="verify-code-button">Verify Code</button>

  <script>
  // âœ… Your Firebase Config
  const firebaseConfig = {
    apiKey: "AIzaSyBtraV34vofWZK_d8gcZPRP0U7TgYIuXW4",
    authDomain: "firefinder-d5c0a.firebaseapp.com",
    projectId: "firefinder-d5c0a",
    storageBucket: "firefinder-d5c0a.appspot.com",
    messagingSenderId: "221428549294",
    appId: "1:221428549294:web:be5a7164bb363eaf9e0f3f",
    databaseURL: "https://firefinder-d5c0a-default-rtdb.firebaseio.com"
  };

  // ðŸ”¥ Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  // Setup and render reCAPTCHA
  let recaptchaVerifier;
  window.onload = () => {
    recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', {
      size: 'normal',
      callback: (response) => {
        console.log('reCAPTCHA solved');
      },
      'expired-callback': () => {
        alert('reCAPTCHA expired. Please reload the page.');
      }
    });
    recaptchaVerifier.render(); // Required!
  };

  // Send Code
  document.getElementById('send-code').addEventListener('click', function () {
    const phoneNumber = document.getElementById('phone-number').value;
    auth.signInWithPhoneNumber(phoneNumber, recaptchaVerifier)
      .then((confirmationResult) => {
        window.confirmationResult = confirmationResult;
        alert('Verification code sent!');
        document.getElementById('verification-code').style.display = 'block';
        document.getElementById('verify-code-button').style.display = 'inline-block';
      })
      .catch((error) => {
        console.error(error);
        alert("Error: " + error.message);
      });
  });
</script>


</body>
</html>
