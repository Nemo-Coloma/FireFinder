<!DOCTYPE html>
<html>
<head>
  <title>Address to Firebase</title>
  <meta charset="UTF-8" />
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCyPhJ7ZhuDE2btCJB-J3HTXp_kXiJo8hI&libraries=places"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f5f6fa;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    .container {
      background-color: white;
      padding: 30px 40px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      text-align: center;
      width: 300px;
    }
    h2 {
      margin-bottom: 20px;
      color: #2f3640;
    }
    input {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      background-color: #273c75;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      width: 100%;
    }
    button:hover {
      background-color: #40739e;
    }
    .status {
      margin-top: 20px;
      font-size: 14px;
      color: #44bd32;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Enter Your Address</h2>
    <input type="text" id="addressInput" placeholder="e.g. Baguio City, Philippines">
    <button onclick="submitAddress()">Submit</button>
    <div class="status" id="status"></div>
  </div>

  <script>
    // Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyCyPhJ7ZhuDE2btCJB-J3HTXp_kXiJo8hI",
      authDomain: "firefinder-d5c0a.firebaseapp.com",
      databaseURL: "https://firefinder-d5c0a-default-rtdb.firebaseio.com",
      projectId: "firefinder-d5c0a",
      storageBucket: "firefinder-d5c0a.firebasestorage.app",
      messagingSenderId: "221428549294",
      appId: "1:221428549294:web:be5a7164bb363eaf9e0f3f"
    };
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // Submit Function
    function submitAddress() {
      const address = document.getElementById("addressInput").value;
      const status = document.getElementById("status");
      status.textContent = "üîç Geocoding address...";

      if (!address.trim()) {
        status.textContent = "‚ùå Please enter a valid address.";
        return;
      }

      const geocodeUrl = `https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(address)}&key=AIzaSyCyPhJ7ZhuDE2btCJB-J3HTXp_kXiJo8hI`;

      fetch(geocodeUrl)
  .then(response => response.json())
  .then(data => {
    console.log(data); // Log the response for debugging
    if (data.status === "OK") {
      const location = data.results[0].geometry.location;
      const locationData = {
        address: address,
        latitude: location.lat,
        longitude: location.lng,
        timestamp: Date.now()
      };
      return database.ref("User").push(locationData);
    } else {
      throw new Error("Geocoding failed: " + data.status);
    }
  })
  .then(() => {
    status.textContent = "‚úÖ Location saved to Firebase!";
  })
  .catch(error => {
    console.error(error); // Log the error for debugging
    status.textContent = "‚ùå " + error.message;
  });
    }
  </script>
</body>
</html>
